# EclipseGradleDependencyScope

This is an Eclipse extension that makes compile-only Gradle dependencies get omitted from the classpath when running projects generated by Gradle. This is needed because Eclipse doesn't seem to have a notion of dependency scope.

It works by using the [Equinox Framework Adaptor API](https://wiki.eclipse.org/Adaptor_Hooks) to register a class transformer which alters the classpath. The [Gradle Tooling API](https://docs.gradle.org/current/userguide/third_party_integration.html#embedding) is used to query the dependencies of the project and their scopes, and the ones with a "provided" scope are removed from the classpath. It's very hacky, but has kept working for surprisingly long.

It was created to be used with Minecraft mods and was tested with Eclipse 2021-09 and 2023-06.

## Usage
Add this to your `eclipse.ini` below the `-vmargs` line:

```
-Dosgi.framework.extensions=reference:file:/path/to/EclipseGradleDependencyScope-<version>.jar
```

Then add this VM argument to the run configuration of each project you want to activate EGDS for:

```
-Degds.enable
```

To enable logging, add this to your `eclipse.ini`. The log will be written to your system's temp folder, and named `EclipseGradleDependencyScope.log`.

```
-Degds.enableLog=true
```

### Config

The tool can be further configured on the project level by placing a Java property file called `egds.properties` in the Gradle project's root directory.

The following options are supported:

* `dependencyBlacklist`: Comma separated list of dependency file name glob patterns to be excluded from the runtime classpath. If set, the Gradle Tooling API will not be used; only the specified dependencies will be excluded.

## Known issues

* The tool fails to detect dependency scope properly with Gradle 4.4.1 due to a bug in the tooling API. Use manual configuration for these projects.

## License
The project is licensed under the [Unlicense](UNLICENSE).
